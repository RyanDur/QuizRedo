/*
 * This build file was auto generated by running the Gradle 'init' task
 * by 'ryandurling' at '11/03/14 21:40' with Gradle 1.10
 *
 * This generated file contains a commented-out sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at http://gradle.org/docs/1.10/userguide/tutorial_java_projects.html
 */

// Apply the java plugin to add support for Java
allprojects {
    apply plugin: 'java'
    apply plugin: 'idea'

    sourceCompatibility = 1.8

    repositories {
        // In this section you declare where to find the dependencies of your project
        mavenCentral()
    }

    dependencies {
        // The production code uses the SLF4J logging API at compile time
        compile 'org.slf4j:slf4j-api:1.7.7',
                'org.slf4j:slf4j-log4j12:1.7.7',
                'com.google.inject:guice:3.0'

        // Declare the dependency for your favourite test framework you want to use in your tests.
        // TestNG is also supported by the Gradle Test task. Just change the
        // testCompile dependency to testCompile 'org.testng:testng:6.8.1' and add
        // 'test.useTestNG()' to your build script.
        testCompile "junit:junit:4.11",
                'org.mockito:mockito-core:1.9.5',
                'info.cukes:cucumber-java:1.1.5',
                'info.cukes:cucumber-junit:1.1.5'
    }
}

subprojects {
    configurations {
        cucumberRuntime {
            extendsFrom testRuntime
        }
    }

    task cucumber(type: Test, dependsOn: [assemble, compileTestJava]) {
        group = "Verification"
        description = "Runs acceptance tests"
        doLast {
            javaexec {
                main = "cucumber.api.cli.Main"
                classpath = configurations.cucumberRuntime + sourceSets.main.output + sourceSets.test.output
                args = ['-f', 'pretty', '--glue', 'acceptance.steps', 'src/test/java/acceptance/features']
            }
        }
    }
    check {
        doLast{
            cucumber.execute()
        }
    }
}

project(':set-up') {
    dependencies {
        testCompile 'org.loadui:testFx:3.1.2'
    }
}

project(':player') {
    dependencies {
        testCompile 'org.loadui:testFx:3.1.2'
    }
}